# üîß Release Notes - Version 1.2.3
## Future-based Response Synchronization

**–î–∞—Ç–∞**: 10 –≥—Ä—É–¥–Ω—è 2025  
**–ö—Ä–∏—Ç–∏—á–Ω—ñ—Å—Ç—å**: –í–ò–°–û–ö–ò–ô –ü–†–Ü–û–†–ò–¢–ï–¢  
**–†–æ–∑–º—ñ—Ä**: Flash 95.3% (1249381 bytes), RAM 17.3% (56572 bytes)

---

## üéØ –û—Å–Ω–æ–≤–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞

–ü—ñ—Å–ª—è **—Ç—Ä—å–æ—Ö** –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ—Ö —Å–ø—Ä–æ–± –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è (v1.2.1, v1.2.2 v1/v2/v3), –ø—Ä–æ–±–ª–µ–º–∞ **–ø–µ—Ä–µ–ø–ª—É—Ç—É–≤–∞–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π** –í–°–ï –©–ï —ñ—Å–Ω—É–≤–∞–ª–∞:

```
[Bluetti] üì§ Requesting register 0x0BF9 (Charging Mode)...
[Bluetti] Single register response for 0x0BF9: value=0 (STANDARD)
[Bluetti] üì§ Requesting register 0x0BFA (Power Lifting)...
[Bluetti] Single register response for 0x0BFA: value=0 (OFF)  <-- –ü–û–ú–ò–õ–ö–ê!
                                              ^^^^^^^^^
                        –¶–µ –Ω–∞—Å–ø—Ä–∞–≤–¥—ñ —Å—Ç–∞—Ä–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å –≤—ñ–¥ 0x0BF9!
```

**–ü—Ä–∏—á–∏–Ω–∞**: ESP32 –Ω–∞–¥—Å–∏–ª–∞–≤ –Ω–æ–≤—É –∫–æ–º–∞–Ω–¥—É **–î–û** –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –Ω–∞ –ø–æ–ø–µ—Ä–µ–¥–Ω—é.

---

## üí° –ù–∞—Ç—Ö–Ω–µ–Ω–Ω—è –≤—ñ–¥ bluetti_mqtt

–ü—Ä–æ–∞–Ω–∞–ª—ñ–∑—É–≤–∞–≤—à–∏ –æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π Python-–ø—Ä–æ–µ–∫—Ç [bluetti_mqtt](https://github.com/warhammerkid/bluetti_mqtt), –≤–∏—è–≤–∏–ª–∏:

### –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞ bluetti_mqtt:
```python
async def perform(self, cmd: DeviceCommand):
    future = self.loop.create_future()
    await self.command_queue.put((cmd, future))
    return future  # ‚úÖ –ü–æ–≤–µ—Ä—Ç–∞—î Future - –±–ª–æ–∫—É—î –Ω–∞—Å—Ç—É–ø–Ω—É –∫–æ–º–∞–Ω–¥—É

def _notification_handler(self, _sender: int, data: bytearray):
    # Ignore notifications we don't expect
    if not self.notify_future or self.notify_future.done():
        return  # ‚úÖ –Ü–ì–ù–û–†–£–Ñ –∑–∞—Å—Ç–∞—Ä—ñ–ª—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ!
    
    self.notify_response.extend(data)
    if len(self.notify_response) == self.current_command.response_size():
        self.notify_future.set_result(self.notify_response)
        # ‚úÖ –¢—ñ–ª—å–∫–∏ –¢–ï–ü–ï–† –Ω–∞—Å—Ç—É–ø–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ –º–æ–∂–µ –≤–∏–∫–æ–Ω–∞—Ç–∏—Å—è
```

**–ö–ª—é—á–æ–≤—ñ –≤–∏—Å–Ω–æ–≤–∫–∏**:
1. **Future-based —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è** - –∫–æ–º–∞–Ω–¥–∞ –±–ª–æ–∫—É—î—Ç—å—Å—è –¥–æ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
2. **–Ü–≥–Ω–æ—Ä—É–≤–∞–Ω–Ω—è –Ω–µ–æ—á—ñ–∫—É–≤–∞–Ω–∏—Ö –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π** - –∑–∞—Å—Ç–∞—Ä—ñ–ª—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—å—Å—è
3. **Event-driven –º–æ–¥–µ–ª—å** - –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –æ–±—Ä–æ–±–ª—è—é—Ç—å—Å—è –∞—Ç–æ–º–∞—Ä–Ω–æ

---

## ‚úÖ –†—ñ—à–µ–Ω–Ω—è v4 - Future-based Synchronization

### 1Ô∏è‚É£ –î–æ–¥–∞–Ω—ñ –Ω–æ–≤—ñ –∑–º—ñ–Ω–Ω—ñ –≤ `bluetti_device.h`:
```cpp
bool waitingForResponse = false;      // –§–ª–∞–≥ –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
unsigned long requestStartTime = 0;   // –ß–∞—Å –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è –∑–∞–ø–∏—Ç—É
```

### 2Ô∏è‚É£ –û–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è `requestRegister()`:
```cpp
void BluettiDevice::requestRegister(uint16_t reg) {
  // ‚úÖ –ü–ï–†–ï–í–Ü–†–ö–ê: —á–∏ –æ—á—ñ–∫—É—î–º–æ –≤—ñ–¥–ø–æ–≤—ñ–¥—å?
  if (waitingForResponse) {
    unsigned long waitTime = millis() - requestStartTime;
    if (waitTime < 3000) { // –¢–∞–π–º–∞—É—Ç 3 —Å–µ–∫—É–Ω–¥–∏
      Serial.printf("‚è≥ Still waiting for previous response (waited %lums)...\n", waitTime);
      return; // ‚ùå –ù–ï –Ω–∞–¥—Å–∏–ª–∞—î–º–æ –Ω–æ–≤–∏–π –∑–∞–ø–∏—Ç!
    } else {
      Serial.printf("‚ö†Ô∏è  Response timeout after %lums, resetting...\n", waitTime);
      waitingForResponse = false; // –°–∫–∏–¥–∞—î–º–æ —Ñ–ª–∞–≥ –ø—ñ—Å–ª—è —Ç–∞–π–º–∞—É—Ç—É
      lastSingleRegisterRequested = 0;
    }
  }
  
  // ... –Ω–∞–¥—Å–∏–ª–∞–Ω–Ω—è –∫–æ–º–∞–Ω–¥–∏ ...
  
  lastSingleRegisterRequested = reg;
  waitingForResponse = true; // ‚úÖ –í—Å—Ç–∞–Ω–æ–≤–ª—é—î–º–æ —Ñ–ª–∞–≥
  requestStartTime = millis(); // ‚úÖ –ó–∞–ø–∞–º'—è—Ç–æ–≤—É—î–º–æ —á–∞—Å
}
```

### 3Ô∏è‚É£ –û–Ω–æ–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü—ñ—è `handleNotification()`:
```cpp
if (dataLength == 2 && length == 7) {
  uint16_t valueRaw = (data[3] << 8) | data[4];
  uint16_t requestedReg = lastSingleRegisterRequested;
  
  // ‚úÖ –Ü–ì–ù–û–†–£–Ñ–ú–û –∑–∞—Å—Ç–∞—Ä—ñ–ª—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
  if (requestedReg == 0 || !waitingForResponse) {
    Serial.printf("‚ö†Ô∏è  Ignoring unexpected response (no pending request)\n");
    return;
  }
  
  // ... –æ–±—Ä–æ–±–∫–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ ...
  
  lastSingleRegisterRequested = 0;
  waitingForResponse = false; // ‚úÖ –°–∫–∏–¥–∞—î–º–æ —Ñ–ª–∞–≥
  Serial.printf("‚úÖ Response processed (waited %lums)\n", millis() - requestStartTime);
}
```

---

## üîç –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ

### –ü–æ—Ä—ñ–≤–Ω—è–Ω–Ω—è –ø—ñ–¥—Ö–æ–¥—ñ–≤:

| –í–µ—Ä—Å—ñ—è | –ü—ñ–¥—Ö—ñ–¥ | –ü—Ä–æ–±–ª–µ–º–∞ |
|--------|--------|----------|
| v1.2.1 | `delay(100-300ms)` | –ù–µ–¥–æ—Å—Ç–∞—Ç–Ω—ñ –∑–∞—Ç—Ä–∏–º–∫–∏ |
| v1.2.2 v1 | –í–∏–¥–∞–ª–µ–Ω–æ `requestChargingMode()` | –ó–∞—Ç—Ä–∏–º–∫–∏ –Ω–µ —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–æ–≤–∞–Ω—ñ –∑ –≤—ñ–¥–ø–æ–≤—ñ–¥—è–º–∏ |
| v1.2.2 v2 | `delay(1000)` –≤ –∫—ñ–Ω—Ü—ñ `requestStatus()` | –í—Å–µ —â–µ –ø–ª—É—Ç–∞—é—Ç—å—Å—è –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ |
| v1.2.2 v3 | `delay(500)` –≤ `requestRegister()` | ESP32 –Ω–∞–¥—Å–∏–ª–∞—î –∫–æ–º–∞–Ω–¥–∏ —à–≤–∏–¥—à–µ –∑–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ |
| **v1.2.3** | **Future-based sync** | ‚úÖ **–ü—Ä–∞—Ü—é—î –ø—Ä–∞–≤–∏–ª—å–Ω–æ!** |

### –ü–µ—Ä–µ–≤–∞–≥–∏ –Ω–æ–≤–æ–≥–æ –ø—ñ–¥—Ö–æ–¥—É:

1. **–ê—Ç–æ–º–∞—Ä–Ω—ñ—Å—Ç—å**: –¢—ñ–ª—å–∫–∏ –æ–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ –≤ –æ–¥–∏–Ω –º–æ–º–µ–Ω—Ç —á–∞—Å—É
2. **–ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ —Ç–∞–π–º–∞—É—Ç—É**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–π —Å–∫–∏–¥ –ø—ñ—Å–ª—è 3 —Å–µ–∫—É–Ω–¥
3. **–Ü–≥–Ω–æ—Ä—É–≤–∞–Ω–Ω—è –¥—É–±–ª—ñ–∫–∞—Ç—ñ–≤**: –ó–∞—Å—Ç–∞—Ä—ñ–ª—ñ –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –ø—Ä–æ–ø—É—Å–∫–∞—é—Ç—å—Å—è
4. **–î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞**: –í–∏–≤–æ–¥–∏—Ç—å—Å—è —á–∞—Å –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è –∫–æ–∂–Ω–æ—ó –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
5. **–í–∏–¥–∞–ª–µ–Ω–æ delay()**: –°–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –±–∞–∑—É—î—Ç—å—Å—è –Ω–∞ —Ä–µ–∞–ª—å–Ω–∏—Ö –ø–æ–¥—ñ—è—Ö, –∞ –Ω–µ –∑–∞—Ç—Ä–∏–º–∫–∞—Ö

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

### ‚úÖ –ü–Ü–î–¢–í–ï–†–î–ñ–ï–ù–û - –ü—Ä–∞—Ü—é—î —ñ–¥–µ–∞–ª—å–Ω–æ!

**–¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è –ø—Ä–æ–≤–µ–¥–µ–Ω–æ**: 10 –≥—Ä—É–¥–Ω—è 2025  
**–ü—Ä–∏—Å—Ç—Ä—ñ–π**: Bluetti EB3A (MAC: D1:4C:11:6B:6A:3D)  
**ESP32**: LILYGO T-Display (16MB Flash)

### –ü–µ—Ä–µ–≤—ñ—Ä–µ–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó:

#### 1. Charging Mode (0x0BF9) ‚úÖ
```
SILENT  (value=1) ‚Üí 100W max - –ø—Ä–∞—Ü—é—î
STANDARD (value=0) ‚Üí 268W max - –ø—Ä–∞—Ü—é—î
TURBO   (value=2) ‚Üí 350W max - –ø—Ä–∞—Ü—é—î
```
**–ß–∞—Å –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ**: 138-156ms  
**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –í—Å—ñ —Ä–µ–∂–∏–º–∏ –ø–µ—Ä–µ–º–∏–∫–∞—é—Ç—å—Å—è –∫–æ—Ä–µ–∫—Ç–Ω–æ, –∑–Ω–∞—á–µ–Ω–Ω—è —á–∏—Ç–∞—é—Ç—å—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

#### 2. ECO Mode (0x0BF7) ‚úÖ
```
ON  (value=1) - –ø—Ä–∞—Ü—é—î
OFF (value=0) - –ø—Ä–∞—Ü—é—î
```
**–ß–∞—Å –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ**: 153ms  
**–†–µ–∑—É–ª—å—Ç–∞—Ç**: ECO mode –Ω–µ —É–≤—ñ–º–∫–Ω—É—î—Ç—å—Å—è —Å–∞–º–æ—Å—Ç—ñ–π–Ω–æ (–ø—Ä–æ–±–ª–µ–º–∞ –≤–∏—Ä—ñ—à–µ–Ω–∞!)

#### 3. Power Lifting (0x0BFA) ‚úÖ
```
OFF (value=0) - –ø—Ä–∞—Ü—é—î
```
**–ß–∞—Å –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ**: 138ms  
**–†–µ–∑—É–ª—å—Ç–∞—Ç**: –ó–Ω–∞—á–µ–Ω–Ω—è —á–∏—Ç–∞—î—Ç—å—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

#### 4. LED Mode (0x0BDA) ‚úÖ
```
OFF (value=0) - –ø—Ä–∞—Ü—é—î
```
**–ß–∞—Å –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ**: 131ms

### –ú–µ—Ö–∞–Ω—ñ–∑–º –±–ª–æ–∫—É–≤–∞–Ω–Ω—è ‚úÖ

**–í–∏—è–≤–ª–µ–Ω–æ –≤ –ª–æ–≥–∞—Ö**:
```
[Bluetti] üì§ Requesting register 0x0BF7...
[Bluetti] ‚è≥ Still waiting for previous response (waited 1297ms)...
```
ESP32 **–∑–∞–±–ª–æ–∫—É–≤–∞–≤** –Ω–æ–≤–∏–π –∑–∞–ø–∏—Ç –¥–æ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ –≤—ñ–¥ –ø–æ–ø–µ—Ä–µ–¥–Ω—å–æ–≥–æ.

### –¢–∞–π–º–∞—É—Ç –∑–∞—Ö–∏—Å—Ç ‚úÖ

**–í–∏—è–≤–ª–µ–Ω–æ –≤ –ª–æ–≥–∞—Ö**:
```
[Bluetti] ‚ö†Ô∏è  Response timeout after 12668ms, resetting...
```
–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Å–∫–∏–Ω—É–ª–∞ —Ñ–ª–∞–≥ –ø—ñ—Å–ª—è –¥–æ–≤–≥–æ—ó –∑–∞—Ç—Ä–∏–º–∫–∏ —ñ –ø—Ä–æ–¥–æ–≤–∂–∏–ª–∞ —Ä–æ–±–æ—Ç—É.

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π:

| –†–µ–≥—ñ—Å—Ç—Ä | –§—É–Ω–∫—Ü—ñ—è | –ß–∞—Å –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ | –°—Ç–∞—Ç—É—Å |
|---------|---------|---------------|--------|
| 0x0BF9 | Charging Mode | 138-156ms | ‚úÖ |
| 0x0BF7 | ECO Mode | 153ms | ‚úÖ |
| 0x0BFA | Power Lifting | 138ms | ‚úÖ |
| 0x0BDA | LED Mode | 131ms | ‚úÖ |

**–°–µ—Ä–µ–¥–Ω—ñ–π —á–∞—Å –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ**: ~140ms  
**–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∏–π —Ç–∞–π–º–∞—É—Ç**: 3000ms (3 —Å–µ–∫—É–Ω–¥–∏)  

### –í–∏—Å–Ω–æ–≤–æ–∫:

üéâ **Future-based —Å–∏–Ω—Ö—Ä–æ–Ω—ñ–∑–∞—Ü—ñ—è –ø—Ä–∞—Ü—é—î –±–µ–∑–¥–æ–≥–∞–Ω–Ω–æ!**

- ‚úÖ –ù–µ–º–∞—î –ø–µ—Ä–µ–ø–ª—É—Ç—É–≤–∞–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π
- ‚úÖ –í—Å—ñ —Ä–µ–∂–∏–º–∏ –ø—Ä–∞—Ü—é—é—Ç—å –∫–æ—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –ë–ª–æ–∫—É–≤–∞–Ω–Ω—è –∑–∞–ø–æ–±—ñ–≥–∞—î –∫–æ–Ω—Ñ–ª—ñ–∫—Ç–∞–º
- ‚úÖ –¢–∞–π–º–∞—É—Ç –∑–∞—Ö–∏—â–∞—î –≤—ñ–¥ –∑–∞–≤–∏—Å–∞–Ω–Ω—è
- ‚úÖ ECO mode –Ω–µ —É–≤—ñ–º–∫–Ω—É—î—Ç—å—Å—è —Å–∞–º–æ—Å—Ç—ñ–π–Ω–æ (–≥–æ–ª–æ–≤–Ω–∞ –ø—Ä–æ–±–ª–µ–º–∞ –≤–∏—Ä—ñ—à–µ–Ω–∞!)

---

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è (OLD - –û—á—ñ–∫—É–≤–∞–Ω–∞ –ø–æ–≤–µ–¥—ñ–Ω–∫–∞)

```
[Bluetti] üì§ Requesting register 0x0BF9...
[Bluetti] ‚úÖ Request sent for 0x0BF9
[Bluetti] üì§ Requesting register 0x0BFA...
[Bluetti] ‚è≥ Still waiting for previous response (waited 124ms)...
[Bluetti] Single register response for 0x0BF9: value=0 (STANDARD)
[Bluetti] üîã Charging mode: STANDARD (value=0)
[Bluetti] ‚úÖ Response processed (waited 237ms)
[Bluetti] üì§ Requesting register 0x0BFA...
[Bluetti] ‚úÖ Request sent for 0x0BFA
[Bluetti] Single register response for 0x0BFA: value=1 (ON)
[Bluetti] ‚ö° Power Lifting: ON
[Bluetti] ‚úÖ Response processed (waited 189ms)
```

**–ö–ª—é—á–æ–≤—ñ –º–æ–º–µ–Ω—Ç–∏**:
- ‚úÖ –ó–∞–ø–∏—Ç–∏ –±–ª–æ–∫—É—é—Ç—å—Å—è –¥–æ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥—ñ
- ‚úÖ –í–∏–≤–æ–¥–∏—Ç—å—Å—è —Ä–µ–∞–ª—å–Ω–∏–π —á–∞—Å –æ—á—ñ–∫—É–≤–∞–Ω–Ω—è
- ‚úÖ –ö–æ–∂–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å –æ–±—Ä–æ–±–ª—è—î—Ç—å—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ

---

## üöÄ –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

### –ß–µ—Ä–µ–∑ Web OTA:
```bash
# 1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ –≤–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å ESP32
http://[ESP32-IP]/

# 2. –ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ firmware –∑ —Ü—å–æ–≥–æ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é:
.pio/build/lilygo-t-display/firmware.bin
```

### –ß–µ—Ä–µ–∑ PlatformIO:
```bash
cd esp32-bluetti-bridge
pio run -t upload
```

---

## ‚ö†Ô∏è –í–ê–ñ–õ–ò–í–û

### –ü–µ—Ä–µ–¥ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è–º:
1. **–í–∏–º–∫–Ω—ñ—Ç—å Home Assistant addon** `Bluetti to MQTT`
2. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å Bluetti EB3A** (–≤–∏–º–∫–Ω—É—Ç–∏/—É–≤—ñ–º–∫–Ω—É—Ç–∏)
3. **–ó–∞—á–µ–∫–∞–π—Ç–µ 30 —Å–µ–∫—É–Ω–¥** –ø—ñ—Å–ª—è –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫—É Bluetti
4. **–ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ –Ω–æ–≤—É –ø—Ä–æ—à–∏–≤–∫—É** —á–µ—Ä–µ–∑ Web OTA –∞–±–æ USB

### –ü—ñ—Å–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è:
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ Serial Monitor –Ω–∞ –Ω–∞—è–≤–Ω—ñ—Å—Ç—å `‚è≥ Still waiting...` –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —â–æ —Ä–µ–∂–∏–º–∏ –∑–∞—Ä—è–¥–∫–∏ (SILENT/STANDARD/TURBO) –ø—Ä–∞—Ü—é—é—Ç—å –∫–æ—Ä–µ–∫—Ç–Ω–æ
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —â–æ ECO mode –Ω–µ —É–≤—ñ–º–∫–Ω—É—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ

---

## üìö –î–æ–≤—ñ–¥–∫–∞

### –†–µ–≥—ñ—Å—Ç—Ä–∏ EB3A (MODBUS):
- `0x0BF7` (3063) - ECO Mode (0=OFF, 1=ON)
- `0x0BF8` (3064) - ECO Shutdown (1-4 –≥–æ–¥–∏–Ω–∏)
- `0x0BF9` (3065) - Charging Mode (0=STANDARD, 1=SILENT, 2=TURBO)
- `0x0BFA` (3066) - Power Lifting (0=OFF, 1=ON)
- `0x0BDA` (3034) - LED Mode (1=Low, 2=High, 3=SOS, 4=Off)

### –í—ñ–¥–ø–æ–≤—ñ–¥—å MODBUS (Single Register):
```
–ë–∞–π—Ç 0-1: 01 03              (MODBUS –∞–¥—Ä–µ—Å–∞ + —Ñ—É–Ω–∫—Ü—ñ—è)
–ë–∞–π—Ç 2:   02                 (–¥–æ–≤–∂–∏–Ω–∞ –¥–∞–Ω–∏—Ö = 2 –±–∞–π—Ç–∏)
–ë–∞–π—Ç 3-4: [VALUE_HIGH] [VALUE_LOW]
–ë–∞–π—Ç 5-6: [CRC_LOW] [CRC_HIGH]
```

---

## üîó –ü–æ—Å–∏–ª–∞–Ω–Ω—è

- [bluetti_mqtt GitHub](https://github.com/warhammerkid/bluetti_mqtt) - –æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π Python –ø—Ä–æ–µ–∫—Ç
- [CHANGELOG.md](CHANGELOG.md) - –ø–æ–≤–Ω–∞ —ñ—Å—Ç–æ—Ä—ñ—è –∑–º—ñ–Ω
- [TROUBLESHOOTING.md](TROUBLESHOOTING.md) - –≤–∏—Ä—ñ—à–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º

---

## üëè –ü–æ–¥—è–∫–∏

–î—è–∫—É—î–º–æ –∞–≤—Ç–æ—Ä—É [bluetti_mqtt](https://github.com/warhammerkid/bluetti_mqtt) –∑–∞ –Ω–∞—Ç—Ö–Ω–µ–Ω–Ω—è Future-based –∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∏!

---

**–í–µ—Ä—Å—ñ—è**: 1.2.3  
**–ö–æ–º–ø—ñ–ª—è—Ü—ñ—è**: ‚úÖ SUCCESS  
**–†–æ–∑–º—ñ—Ä**: Flash 95.3% (1249381/1310720 bytes), RAM 17.3% (56572/327680 bytes)
