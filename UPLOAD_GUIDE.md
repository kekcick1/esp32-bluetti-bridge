# üì§ –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è –∑ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –ø—Ä–æ—à–∏–≤–∫–∏

## ‚ö†Ô∏è –ü—Ä–æ–±–ª–µ–º–∞ –∑ CH9102F

–Ø–∫—â–æ –≤–∏–Ω–∏–∫–∞—î –ø–æ–º–∏–ª–∫–∞ `OSError: [Errno 71] Protocol error` –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ —á–µ—Ä–µ–∑ USB, —Ü–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ –¥–ª—è CH9102F —á–∏–ø–∞. –ü–æ—Ç—Ä—ñ–±–µ–Ω **—Ä—É—á–Ω–∏–π —Ä–µ–∂–∏–º –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è**.

---

## üîß –ú–µ—Ç–æ–¥ 1: –†—É—á–Ω–∏–π —Ä–µ–∂–∏–º –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)

### –ö—Ä–æ–∫–∏:

1. **–ü—ñ–¥–∫–ª—é—á—ñ—Ç—å ESP32 —á–µ—Ä–µ–∑ USB-C**

2. **–í—ñ–¥–∫—Ä–∏–π—Ç–µ —Ç–µ—Ä–º—ñ–Ω–∞–ª —ñ –≤–∏–∫–æ–Ω–∞–π—Ç–µ –∫–æ–º–∞–Ω–¥—É –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è:**
   ```bash
   cd ~/Documents/esp32
   pio run --target upload
   ```

3. **–ö–æ–ª–∏ –ø–æ–±–∞—á–∏—Ç–µ "Connecting...":**
   - **–£—Ç—Ä–∏–º—É–π—Ç–µ –∫–Ω–æ–ø–∫—É BOOT** (GPIO 0, –Ω–∏–∂–Ω—è –∫–Ω–æ–ø–∫–∞)
   - **–ù–∞—Ç–∏—Å–Ω—ñ—Ç—å —ñ –≤—ñ–¥–ø—É—Å—Ç—ñ—Ç—å –∫–Ω–æ–ø–∫—É RESET** (—è–∫—â–æ —î) –∞–±–æ –ø—Ä–æ—Å—Ç–æ –¥–æ—á–µ–∫–∞–π—Ç–µ—Å—è
   - **–í—ñ–¥–ø—É—Å—Ç—ñ—Ç—å –∫–Ω–æ–ø–∫—É BOOT** —á–µ—Ä–µ–∑ 1-2 —Å–µ–∫—É–Ω–¥–∏

4. **–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –º–∞—î –ø–æ—á–∞—Ç–∏—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ**

---

## üîß –ú–µ—Ç–æ–¥ 2: –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∏–π reset method

–Ø–∫—â–æ –º–µ—Ç–æ–¥ 1 –Ω–µ –ø—Ä–∞—Ü—é—î, —Å–ø—Ä–æ–±—É–π—Ç–µ –∑–º—ñ–Ω–∏—Ç–∏ `upload_resetmethod` –≤ `platformio.ini`:

```ini
; –í–∞—Ä—ñ–∞–Ω—Ç A (–ø–æ—Ç–æ—á–Ω–∏–π):
upload_resetmethod = no_reset

; –í–∞—Ä—ñ–∞–Ω—Ç B (—Å–ø—Ä–æ–±—É–π—Ç–µ —è–∫—â–æ A –Ω–µ –ø—Ä–∞—Ü—é—î):
; upload_resetmethod = nodemcu

; –í–∞—Ä—ñ–∞–Ω—Ç C:
; upload_resetmethod = hard_reset
```

–ü—ñ—Å–ª—è –∑–º—ñ–Ω–∏ —Å–ø—Ä–æ–±—É–π—Ç–µ –∑–Ω–æ–≤—É:
```bash
pio run --target upload
```

---

## üì° –ú–µ—Ç–æ–¥ 3: OTA –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è (—è–∫—â–æ ESP32 –≤–∂–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–∏–π –¥–æ WiFi)

–Ø–∫—â–æ ESP32 –≤–∂–µ –ø—Ä–∞—Ü—é—î —ñ –ø—ñ–¥–∫–ª—é—á–µ–Ω–∏–π –¥–æ WiFi, –º–æ–∂–Ω–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —á–µ—Ä–µ–∑ OTA:

### 1. –ó–Ω–∞–π–¥—ñ—Ç—å IP –∞–¥—Ä–µ—Å—É ESP32:

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ Serial Monitor –∞–±–æ —Ä–æ—É—Ç–µ—Ä
pio device monitor
# –®—É–∫–∞–π—Ç–µ —Ä—è–¥–æ–∫: "WiFi connected, IP: 192.168.1.XXX"
```

### 2. –ó–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ —á–µ—Ä–µ–∑ OTA:

```bash
# –ó–∞ IP –∞–¥—Ä–µ—Å–æ—é
pio run --target upload --upload-port 192.168.1.XXX

# –ê–±–æ –∑–∞ hostname (—è–∫—â–æ mDNS –ø—Ä–∞—Ü—é—î)
pio run --target upload --upload-port ESP32-Bluetti.local
```

---

## üîç –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º

### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –ø–æ—Ä—Ç—É:

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —á–∏ –ø–æ—Ä—Ç —ñ—Å–Ω—É—î
ls -la /dev/ttyACM*

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø—É
groups  # –ú–∞—î –º—ñ—Å—Ç–∏—Ç–∏ uucp –∞–±–æ dialout
```

### –Ø–∫—â–æ –ø–æ—Ä—Ç –Ω–µ –≤–∏–¥–Ω–æ:

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ USB –ø—Ä–∏—Å—Ç—Ä–æ—ó
lsusb | grep -i "ch910\|ch341\|303a"

# –ü–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ USB –º–æ–¥—É–ª—å (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ)
sudo modprobe -r ch341
sudo modprobe ch341
```

### –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø—É:

```bash
# –î–æ–¥–∞—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –≤ –≥—Ä—É–ø—É uucp
sudo usermod -a -G uucp $USER
# –ü–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–π—Ç–∏ —ñ –∑–∞–π—Ç–∏ –∑–Ω–æ–≤—É –∞–±–æ:
newgrp uucp
```

---

## ‚úÖ –®–≤–∏–¥–∫–∏–π —á–µ–∫–ª–∏—Å—Ç

- [ ] ESP32 –ø—ñ–¥–∫–ª—é—á–µ–Ω–∏–π —á–µ—Ä–µ–∑ USB-C
- [ ] –ü–æ—Ä—Ç –≤–∏–¥–Ω–æ: `ls -la /dev/ttyACM0`
- [ ] –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø—É –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω—ñ
- [ ] –ö–æ–º–∞–Ω–¥–∞ `pio run --target upload` –≤–∏–∫–æ–Ω–∞–Ω–∞
- [ ] –ö–Ω–æ–ø–∫–∞ BOOT –Ω–∞—Ç–∏—Å–Ω—É—Ç–∞ –ø—ñ–¥ —á–∞—Å "Connecting..."
- [ ] –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —É—Å–ø—ñ—à–Ω–µ

---

## üÜò –Ø–∫—â–æ –Ω—ñ—á–æ–≥–æ –Ω–µ –¥–æ–ø–æ–º–∞–≥–∞—î

1. **–°–ø—Ä–æ–±—É–π—Ç–µ —ñ–Ω—à–∏–π USB –ø–æ—Ä—Ç**
2. **–°–ø—Ä–æ–±—É–π—Ç–µ —ñ–Ω—à–∏–π USB –∫–∞–±–µ–ª—å** (—è–∫—ñ—Å–Ω–∏–π, –∑ –ø—ñ–¥—Ç—Ä–∏–º–∫–æ—é –¥–∞–Ω–∏—Ö)
3. **–ü–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂—Ç–µ ESP32** (–≤—ñ–¥–∫–ª—é—á—ñ—Ç—å —ñ –ø—ñ–¥–∫–ª—é—á—ñ—Ç—å USB)
4. **–í–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ OTA** —è–∫—â–æ ESP32 –≤–∂–µ –ø—Ä–∞—Ü—é—î

---

**–ü—Ä–∏–º—ñ—Ç–∫–∞:** CH9102F —á—ñ–ø —ñ–Ω–æ–¥—ñ –ø–æ—Ç—Ä–µ–±—É—î —Ä—É—á–Ω–æ–≥–æ –≤—Ö–æ–¥—É –≤ —Ä–µ–∂–∏–º –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è. –¶–µ –Ω–æ—Ä–º–∞–ª—å–Ω–æ —ñ –Ω–µ —î –ø–æ–º–∏–ª–∫–æ—é!










