# üîç –î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–æ–±–ª–µ–º–∏ –∑ –Ω–æ—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—è–º–∏ Bluetti

## –ü—Ä–æ–±–ª–µ–º–∞
ESP32 –ø—ñ–¥–∫–ª—é—á–∞—î—Ç—å—Å—è –¥–æ Bluetti EB3A, –≤—ñ–¥–ø—Ä–∞–≤–ª—è—î –∫–æ–º–∞–Ω–¥–∏ —É—Å–ø—ñ—à–Ω–æ, –∞–ª–µ –Ω–µ –æ—Ç—Ä–∏–º—É—î –Ω–æ—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó –∑ –¥–∞–Ω–∏–º–∏.

## –ü–æ—Ç–æ—á–Ω–∏–π —Å—Ç–∞–Ω
- ‚úÖ –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ Bluetti –ø—Ä–∞—Ü—é—î
- ‚úÖ –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ –∑–Ω–∞—Ö–æ–¥—è—Ç—å—Å—è
- ‚úÖ –ü—ñ–¥–ø–∏—Å–∫–∞ –Ω–∞ –Ω–æ—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó —É—Å–ø—ñ—à–Ω–∞ (`Subscribe result: OK`)
- ‚úÖ –ö–æ–º–∞–Ω–¥–∏ –≤—ñ–¥–ø—Ä–∞–≤–ª—è—é—Ç—å—Å—è —É—Å–ø—ñ—à–Ω–æ (`Command sent: OK`)
- ‚ùå Callback –Ω–µ –≤–∏–∫–ª–∏–∫–∞—î—Ç—å—Å—è (–Ω–µ–º–∞—î `*** CALLBACK CALLED ***`)
- ‚ùå –ù–æ—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç—å
- ‚ùå –ß–∏—Ç–∞–Ω–Ω—è –≤—Ä—É—á–Ω—É –Ω–µ –ø—Ä–∞—Ü—é—î (`Cannot read from notify characteristic`)

## –ú–æ–∂–ª–∏–≤—ñ –ø—Ä–∏—á–∏–Ω–∏

### 1. Bluetti –ø—ñ–¥–∫–ª—é—á–µ–Ω–∏–π –¥–æ —ñ–Ω—à–æ–≥–æ –ø—Ä–∏—Å—Ç—Ä–æ—é
**–ù–∞–π—ñ–º–æ–≤—ñ—Ä–Ω—ñ—à–∞ –ø—Ä–∏—á–∏–Ω–∞!**

Bluetti EB3A –º–æ–∂–µ –±—É—Ç–∏ –ø—ñ–¥–∫–ª—é—á–µ–Ω–∏–π –æ–¥–Ω–æ—á–∞—Å–Ω–æ —Ç—ñ–ª—å–∫–∏ –¥–æ –æ–¥–Ω–æ–≥–æ BLE –ø—Ä–∏—Å—Ç—Ä–æ—é.

**–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞:**
1. –í–∏–º–∫–Ω—ñ—Ç—å Home Assistant addon "Bluetti to MQTT" (—è–∫—â–æ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–π)
2. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å Bluetti EB3A (–≤–∏–º–∫–Ω—ñ—Ç—å/—É–≤—ñ–º–∫–Ω—ñ—Ç—å)
3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å ESP32
4. –°–ø—Ä–æ–±—É–π—Ç–µ –∑–Ω–æ–≤—É

### 2. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞ –∫–æ–º–∞–Ω–¥–∞
–ú–æ–∂–ª–∏–≤–æ, –∫–æ–º–∞–Ω–¥–∞ `0x01 0x03 0x00 0x00 0x00 0x20` –Ω–µ –∞–∫—Ç–∏–≤—É—î –Ω–æ—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó.

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ñ –∫–æ–º–∞–Ω–¥–∏ –¥–ª—è —Å–ø—Ä–æ–±–∏:**
- `0xAA 0x55 0x90 0xEB` - –º–æ–∂–ª–∏–≤–∞ –∫–æ–º–∞–Ω–¥–∞ –∞–∫—Ç–∏–≤–∞—Ü—ñ—ó
- `0x01 0x03 0x00 0x00 0x00 0x40` - —á–∏—Ç–∞–Ω–Ω—è –±—ñ–ª—å—à–æ—ó –∫—ñ–ª—å–∫–æ—Å—Ç—ñ —Ä–µ–≥—ñ—Å—Ç—Ä—ñ–≤
- `0x01 0x03 0x00 0x00 0x00 0x10` - —á–∏—Ç–∞–Ω–Ω—è –º–µ–Ω—à–æ—ó –∫—ñ–ª—å–∫–æ—Å—Ç—ñ —Ä–µ–≥—ñ—Å—Ç—Ä—ñ–≤

### 3. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ñ UUID
–ú–æ–∂–ª–∏–≤–æ, UUID –¥–ª—è –Ω–æ—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ–π –≤—ñ–¥—Ä—ñ–∑–Ω—è—é—Ç—å—Å—è.

**–ü–æ—Ç–æ—á–Ω—ñ UUID:**
- Service: `0000ff00-0000-1000-8000-00805f9b34fb`
- Notify: `0000ff01-0000-1000-8000-00805f9b34fb`
- Write: `0000ff02-0000-1000-8000-00805f9b34fb`

**–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —á–µ—Ä–µ–∑ nRF Connect:**
1. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å nRF Connect –Ω–∞ —Å–º–∞—Ä—Ç—Ñ–æ–Ω
2. –ü—ñ–¥–∫–ª—é—á—ñ—Ç—å—Å—è –¥–æ Bluetti EB3A
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ UUID —Å–µ—Ä–≤—ñ—Å—ñ–≤ —Ç–∞ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫
4. –ü–æ—Ä—ñ–≤–Ω—è–π—Ç–µ –∑ –ø–æ—Ç–æ—á–Ω–∏–º–∏ UUID –≤ –∫–æ–¥—ñ

### 4. –ü—Ä–æ—à–∏–≤–∫–∞ Bluetti –Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É—î –Ω–æ—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó
–î–µ—è–∫—ñ –≤–µ—Ä—Å—ñ—ó –ø—Ä–æ—à–∏–≤–∫–∏ Bluetti –º–æ–∂—É—Ç—å –Ω–µ –ø—ñ–¥—Ç—Ä–∏–º—É–≤–∞—Ç–∏ –Ω–æ—Ç–∏—Ñ—ñ–∫–∞—Ü—ñ—ó –¥–ª—è —Ü—ñ—î—ó –∫–æ–º–∞–Ω–¥–∏.

**–†—ñ—à–µ–Ω–Ω—è:**
- –û–Ω–æ–≤—ñ—Ç—å –ø—Ä–æ—à–∏–≤–∫—É Bluetti (—è–∫—â–æ –º–æ–∂–ª–∏–≤–æ)
- –í–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∏–π –º–µ—Ç–æ–¥ –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö

## –î—ñ–∞–≥–Ω–æ—Å—Ç–∏—á–Ω—ñ –∫—Ä–æ–∫–∏

### –ö—Ä–æ–∫ 1: –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ Bluetti –Ω–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–∏–π –¥–æ —ñ–Ω—à–æ–≥–æ –ø—Ä–∏—Å—Ç—Ä–æ—é

```bash
# –í Home Assistant:
Settings ‚Üí Add-ons ‚Üí Bluetti to MQTT ‚Üí STOP
# –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –∞–¥–¥–æ–Ω –≤–∏–º–∫–Ω–µ–Ω–æ
```

### –ö—Ä–æ–∫ 2: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å Bluetti
1. –í–∏–º–∫–Ω—ñ—Ç—å Bluetti EB3A
2. –ü–æ—á–µ–∫–∞–π—Ç–µ 10 —Å–µ–∫—É–Ω–¥
3. –£–≤—ñ–º–∫–Ω—ñ—Ç—å –∑–Ω–æ–≤—É
4. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å ESP32

### –ö—Ä–æ–∫ 3: –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ UUID —á–µ—Ä–µ–∑ nRF Connect
1. –í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å nRF Connect (iOS/Android)
2. –°–∫–∞–Ω—É–π—Ç–µ –ø—Ä–∏—Å—Ç—Ä–æ—ó
3. –ó–Ω–∞–π–¥—ñ—Ç—å "EB3A" –∞–±–æ "BLUETTI"
4. –ü—ñ–¥–∫–ª—é—á—ñ—Ç—å—Å—è
5. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ UUID —Å–µ—Ä–≤—ñ—Å—ñ–≤ —Ç–∞ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫
6. –ü–æ—Ä—ñ–≤–Ω—è–π—Ç–µ –∑ UUID –≤ –∫–æ–¥—ñ

### –ö—Ä–æ–∫ 4: –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ª–æ–≥–∏ Serial Monitor
–®—É–∫–∞–π—Ç–µ:
- `*** CALLBACK CALLED ***` - —è–∫—â–æ —î, callback –ø—Ä–∞—Ü—é—î
- `Read X bytes manually` - —è–∫—â–æ —î, —á–∏—Ç–∞–Ω–Ω—è –≤—Ä—É—á–Ω—É –ø—Ä–∞—Ü—é—î
- `Cannot read from notify characteristic` - —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ –Ω–µ —á–∏—Ç–∞–±–µ–ª—å–Ω–∞

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ñ —Ä—ñ—à–µ–Ω–Ω—è

### –†—ñ—à–µ–Ω–Ω—è 1: –í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ —ñ–Ω—à–∏–π –ø—Ä–æ—Ç–æ–∫–æ–ª
–ú–æ–∂–ª–∏–≤–æ, –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ —ñ–Ω—à–∏–π –ø—Ä–æ—Ç–æ–∫–æ–ª –¥–ª—è –æ—Ç—Ä–∏–º–∞–Ω–Ω—è –¥–∞–Ω–∏—Ö –≤—ñ–¥ Bluetti.

### –†—ñ—à–µ–Ω–Ω—è 2: –í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ Home Assistant addon
–Ø–∫—â–æ ESP32 –Ω–µ –º–æ–∂–µ –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–∞–Ω—ñ –Ω–∞–ø—Ä—è–º—É, –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ Home Assistant addon "Bluetti to MQTT" —Ç–∞ –æ—Ç—Ä–∏–º—É–≤–∞—Ç–∏ –¥–∞–Ω—ñ —á–µ—Ä–µ–∑ MQTT.

### –†—ñ—à–µ–Ω–Ω—è 3: –í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ —ñ–Ω—à–∏–π –ø—Ä–æ–µ–∫—Ç
–ú–æ–∂–ª–∏–≤–æ, —ñ–Ω—à—ñ –ø—Ä–æ–µ–∫—Ç–∏ –º–∞—é—Ç—å —Ä–æ–±–æ—á–∏–π –∫–æ–¥ –¥–ª—è Bluetti EB3A, —è–∫–∏–π –º–æ–∂–Ω–∞ –∞–¥–∞–ø—Ç—É–≤–∞—Ç–∏.

## –ù–∞—Å—Ç—É–ø–Ω—ñ –∫—Ä–æ–∫–∏

1. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ Bluetti –Ω–µ –ø—ñ–¥–∫–ª—é—á–µ–Ω–∏–π –¥–æ —ñ–Ω—à–æ–≥–æ –ø—Ä–∏—Å—Ç—Ä–æ—é**
2. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å Bluetti —Ç–∞ ESP32**
3. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ UUID —á–µ—Ä–µ–∑ nRF Connect**
4. **–ù–∞–¥—ñ—à–ª—ñ—Ç—å –ª–æ–≥–∏ –∑ Serial Monitor** (–æ—Å–æ–±–ª–∏–≤–æ —á–∞—Å—Ç–∏–Ω—É –ø—Ä–æ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è —Ç–∞ –ø—ñ–¥–ø–∏—Å–∫—É)
5. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ —î —ñ–Ω—à—ñ –ø—Ä–æ–µ–∫—Ç–∏ –∑ —Ä–æ–±–æ—á–∏–º –∫–æ–¥–æ–º –¥–ª—è Bluetti EB3A**

## –ö–æ—Ä–∏—Å–Ω—ñ –ø–æ—Å–∏–ª–∞–Ω–Ω—è

- [Bluetti ESP32 Bridge](https://github.com/mariolukas/Bluetti_ESP32_Bridge) - –º–æ–∂–ª–∏–≤–æ, —Ç–∞–º —î —Ä–æ–±–æ—á–∏–π –∫–æ–¥
- [Home Assistant Bluetti Integration](https://github.com/warhammerkid/bluetti_mqtt) - –º–æ–∂–ª–∏–≤–æ, —Ç–∞–º —î —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –ø—Ä–æ—Ç–æ–∫–æ–ª




