c# üîß –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º–∏ –∑ MikroTik DHCP –¥–ª—è ESP32

## –ü—Ä–æ–±–ª–µ–º–∞
ESP32 (MAC: `88:13:BF:FD:2E:4C`, IP: `11.18.10.55`) –ø–æ—Å—Ç—ñ–π–Ω–æ –ø–µ—Ä–µ–ø—ñ–¥–∫–ª—é—á–∞—î—Ç—å—Å—è –¥–æ Wi-Fi, –∞ DHCP —Å–µ—Ä–≤–µ—Ä –Ω–µ –º–æ–∂–µ —Å—Ç–∞–±—ñ–ª—å–Ω–æ –≤–∏–¥–∞—Ç–∏ IP –∞–¥—Ä–µ—Å—É.

## –ü—Ä–∏—á–∏–Ω–∞
–°—Ç–∞—Ç–∏—á–Ω–∏–π DHCP lease –¥–ª—è ESP32 **–≤–∏–º–∫–Ω–µ–Ω–∏–π** (`disabled=yes`) –≤ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó MikroTik.

## ‚úÖ –†—ñ—à–µ–Ω–Ω—è

### –í–∞—Ä—ñ–∞–Ω—Ç 1: –ß–µ—Ä–µ–∑ Winbox (–ù–ê–ô–ü–†–û–°–¢–Ü–®–ï)

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ **Winbox** —ñ –ø—ñ–¥–∫–ª—é—á—ñ—Ç—å—Å—è –¥–æ —Ä–æ—É—Ç–µ—Ä–∞
2. –ü–µ—Ä–µ–π–¥—ñ—Ç—å: **IP ‚Üí DHCP Server ‚Üí Leases**
3. –ó–Ω–∞–π–¥—ñ—Ç—å –∑–∞–ø–∏—Å –∑ MAC –∞–¥—Ä–µ—Å–æ—é `88:13:BF:FD:2E:4C` –∞–±–æ IP `11.18.10.55`
4. –ü–æ–¥–≤—ñ–π–Ω–∏–π –∫–ª—ñ–∫ –Ω–∞ –∑–∞–ø–∏—Å
5. –ó–Ω—ñ–º—ñ—Ç—å –≥–∞–ª–æ—á–∫—É **"Disabled"**
6. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **OK**

### –í–∞—Ä—ñ–∞–Ω—Ç 2: –ß–µ—Ä–µ–∑ Terminal/SSH

–ü—ñ–¥–∫–ª—é—á—ñ—Ç—å—Å—è –¥–æ —Ä–æ—É—Ç–µ—Ä–∞ —á–µ—Ä–µ–∑ SSH –∞–±–æ Terminal —ñ –≤–∏–∫–æ–Ω–∞–π—Ç–µ:

```bash
/ip dhcp-server lease set [find mac-address=88:13:BF:FD:2E:4C] disabled=no
```

–ê–±–æ –∑–∞ IP –∞–¥—Ä–µ—Å–æ—é:

```bash
/ip dhcp-server lease set [find address=11.18.10.55] disabled=no
```

### –í–∞—Ä—ñ–∞–Ω—Ç 3: –ß–µ—Ä–µ–∑ WebFig

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ –≤–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Ä–æ—É—Ç–µ—Ä–∞
2. –ü–µ—Ä–µ–π–¥—ñ—Ç—å: **IP ‚Üí DHCP Server ‚Üí Leases**
3. –ó–Ω–∞–π–¥—ñ—Ç—å –∑–∞–ø–∏—Å –∑ MAC `88:13:BF:FD:2E:4C`
4. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å –Ω–∞ –∑–∞–ø–∏—Å –¥–ª—è —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è
5. –ó–Ω—ñ–º—ñ—Ç—å –≥–∞–ª–æ—á–∫—É **"Disabled"**
6. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å **OK**

## üîç –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞

–ü—ñ—Å–ª—è —É–≤—ñ–º–∫–Ω–µ–Ω–Ω—è –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ:

```bash
/ip dhcp-server lease print where mac-address=88:13:BF:FD:2E:4C
```

–í–∏ –ø–æ–≤–∏–Ω–Ω—ñ –ø–æ–±–∞—á–∏—Ç–∏:
```
disabled=no
```

## üìä –û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü—ñ—Å–ª—è —É–≤—ñ–º–∫–Ω–µ–Ω–Ω—è —Å—Ç–∞—Ç–∏—á–Ω–æ–≥–æ DHCP lease:
- ‚úÖ ESP32 –æ—Ç—Ä–∏–º–∞—î —Å—Ç–∞–±—ñ–ª—å–Ω–∏–π IP `11.18.10.55`
- ‚úÖ –ü–µ—Ä–µ–ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è Wi-Fi –ø—Ä–∏–ø–∏–Ω—è—Ç—å—Å—è
- ‚úÖ –ü–æ–ø–µ—Ä–µ–¥–∂–µ–Ω–Ω—è "offering lease without success" –∑–Ω–∏–∫–Ω—É—Ç—å
- ‚úÖ –ó'—î–¥–Ω–∞–Ω–Ω—è —Å—Ç–∞–Ω–µ —Å—Ç–∞–±—ñ–ª—å–Ω–∏–º

## ‚ö†Ô∏è –î–æ–¥–∞—Ç–∫–æ–≤—ñ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó

–Ø–∫—â–æ –ø—Ä–æ–±–ª–µ–º–∞ –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è –ø—ñ—Å–ª—è —É–≤—ñ–º–∫–Ω–µ–Ω–Ω—è —Å—Ç–∞—Ç–∏—á–Ω–æ–≥–æ lease:

1. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ ESP32 –Ω–µ –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è** - –ø–æ–¥–∏–≤—ñ—Ç—å—Å—è –ª–æ–≥–∏ —á–µ—Ä–µ–∑ Serial Monitor
2. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ —Å–∏–≥–Ω–∞–ª Wi-Fi** - RSSI –ø–æ–≤–∏–Ω–µ–Ω –±—É—Ç–∏ –∫—Ä–∞—â–µ -70 dBm
3. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ DHCP lease time** - —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ 1 –¥–µ–Ω—å –∞–±–æ –±—ñ–ª—å—à–µ:
   ```bash
   /ip dhcp-server print where name=dhcp-main
   ```
4. **–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –Ω–µ–º–∞—î –∫–æ–Ω—Ñ–ª—ñ–∫—Ç—É IP –∞–¥—Ä–µ—Å**:
   ```bash
   /ip dhcp-server lease print where address=11.18.10.55
   ```

## üêõ –Ø–∫—â–æ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ –≤–∏—Ä—ñ—à–µ–Ω–∞

–Ø–∫—â–æ –ø—ñ—Å–ª—è —É–≤—ñ–º–∫–Ω–µ–Ω–Ω—è —Å—Ç–∞—Ç–∏—á–Ω–æ–≥–æ lease –ø—Ä–æ–±–ª–µ–º–∞ –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è, –º–æ–∂–ª–∏–≤–∞ –ø—Ä–æ–±–ª–µ–º–∞ –≤ –∫–æ–¥—ñ ESP32. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ:

1. –ß–∏ –Ω–µ –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂—É—î—Ç—å—Å—è ESP32 (–¥–∏–≤–∏—Ç–∏—Å—è Serial Monitor)
2. –ß–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –ø—Ä–∞—Ü—é—î —Ñ—É–Ω–∫—Ü—ñ—è `ensureWiFi()` –≤ `main.cpp`
3. –ß–∏ –Ω–µ–º–∞—î –ø–æ–º–∏–ª–æ–∫ –≤ –ª–æ–≥–∞—Ö ESP32

---

**–ì–æ—Ç–æ–≤–æ!** –ü—ñ—Å–ª—è —É–≤—ñ–º–∫–Ω–µ–Ω–Ω—è —Å—Ç–∞—Ç–∏—á–Ω–æ–≥–æ DHCP lease ESP32 –º–∞—î –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ —Å—Ç–∞–±—ñ–ª—å–Ω–æ! üöÄ

